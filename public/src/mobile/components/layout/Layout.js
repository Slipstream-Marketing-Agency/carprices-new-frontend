import Head from "next/head";
import { useRouter } from "next/router";
import React, { useEffect, useState } from "react";
// import { useMediaQuery } from 'react-responsive'
import Footer from "./Footer";
import Navbar from "./Navbar";
import { toast, ToastContainer } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";
import { useMediaQuery } from "react-responsive";
import MobileNavbar from "./MobileNavbar";

function Layout({ title, children }) {
  const router = useRouter();
  const [screenChange, setScreenChange] = useState(false);

  // const isMobile = useMediaQuery({ query: "(max-width: 500px)" });
  // if (isMobile) {
  //   // 
  //   router.push(process.env.NEXT_PUBLIC_MOBILE_LINK + router.asPath);
  // }

  const isMobile = useMediaQuery({ maxWidth: 767 });
  const isDesktop = useMediaQuery({ minWidth: 768 });

  useEffect(() => {
    isMobile && setScreenChange(true);
    isDesktop && setScreenChange(false);
  }, [isMobile]);

  // const isMobile = useMediaQuery({ query: '(max-width: 767px)' })

  return (
    <>
      <Head>
        <title>{title ? title + " - " : ""}Carprices</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
        
      </Head>
      <main>
        <ToastContainer
          position="top-center"
          autoClose={1000}
          limit={1}
          hideProgressBar
          newestOnTop={false}
          closeOnClick
          rtl={false}
          pauseOnFocusLoss
          draggable
          pauseOnHover
          theme="colored"
        />
        {isMobile ? (
          <>
            <MobileNavbar />
            {children}
            {/* <Footer /> */}
          </>
        ): (
          <>
            <Navbar />
            {children}
            <Footer />
          </>
        )}
      </main>
    </>
  );
}

export default Layout;
